name: Auto_deployment_front_angular

on:
  push:
    branches:
      - dev

jobs:
  install:
    runs-on: self-hosted

    steps:

    - name: Installer les dépendances
      run: |
        npm install

  build:
    runs-on: self-hosted

    steps:

    - name: Compile le projet
      run: |
        ng build

  deploy:
    runs-on: self-hosted
    
    steps:
    
    - name: Déployer sur la production
      if: success()
      run: |
        sftp startupfoundercanvas-preprod@ssh-startupfoundercanvas-preprod.alwaysdata.net << EOF
            put -r startupFounderCanvasTeste/dist/startup-founder-canvas-client/* www/
            quit
        EOF
