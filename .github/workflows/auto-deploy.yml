name: Auto_deployment_front_angular

on:
  push:
    branches:
      - dev
jobs:
    install-dependencies:
        runs-on: ubuntu-latest
    
        steps:
        - name: Checkout du code
          uses: actions/checkout@v2
    
        - name: Installer les dépendances
          run: | 
            cd angular/
            npm install
    
    build:
        runs-on: ubuntu-latest
    
        needs: install-dependencies
    
        steps:
        - name: Construire l'application
          run: |
            cd angular/
            npm run build
    
    deployment:
        runs-on: ubuntu-latest
    
        needs: build
    
        steps:
        - name: Déployer sur la production
          run: |
            sftp startupfoundercanvas-preprod@ssh-startupfoundercanvas-preprod.alwaysdata.net << EOF
                put -r startupFounderCanvasTeste/dist/startup-founder-canvas-client/* www/
                quit
            EOF